<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPLABÂ® Harmony Graphics Suite: Graphics Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script src="striped_bg.js"></script>
<link href="that_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mhgs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPLABÂ® Harmony Graphics Suite
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="GraphicsSuite.html">Graphics Suite</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Graphics Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md78">Graphics Library</a><ul><li class="level2"><a href="#autotoc_md79">Legato Graphics Library</a><ul><li class="level3"><a href="#autotoc_md80">Supported Devices</a></li>
<li class="level3"><a href="#autotoc_md81">Support Runtime Features</a></li>
<li class="level3"><a href="#autotoc_md82">Supported Hardware and Peripherals</a></li>
<li class="level3"><a href="#autotoc_md83">Overview</a><ul><li class="level4"><a href="#autotoc_md84">Definitions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md78"></a>
Graphics Library</h1>
<p>Graphics rendering is made available through the a graphic library. The graphic libraries in MHGS are 2-Dimensional (2D) raster paint engines which support the drawing of a complete UI design on display modules using specific display controllers. The libraries are specifically built to run in low-powered low-resource environments.</p>
<p>Each library contains some or more of the following components:</p>
<ul>
<li>Images - The graphics library may support reading, decompression, and rendering of JPEG, PNG, and RAW, image formats.</li>
<li>Internationalization- The graphics library may support Unicode for the encoding of displayable text strings. The library may support the adaptation of text to different language using an internal translation method not requiring re-engineering.</li>
<li>Layers - The graphics library may support multi-layer hardware platforms. The layers help separate UI components onto individual rendering surfaces of a display controller.</li>
<li>Acceleration - The graphics library may support an interface to a Graphics Processor Unit (GPU) peripheral on supported platforms. The graphics library may employ a hardware abstraction layer that helps to integrate hardware acceleration into applications.</li>
</ul>
<h2><a class="anchor" id="autotoc_md79"></a>
Legato Graphics Library</h2>
<p>The legato graphics library is the next generation graphics library for the MPLAB Harmony Graphics Suite. Beside provide all the capabilities of the Legato graphics library, it focuses on support for low performance devices.</p>
<h3><a class="anchor" id="autotoc_md80"></a>
Supported Devices</h3>
<ul>
<li>SAM E54</li>
<li>SAM E70</li>
<li>PIC32MZ DA</li>
<li>PIC32MZ EF</li>
</ul>
<h3><a class="anchor" id="autotoc_md81"></a>
Support Runtime Features</h3>
<ul>
<li>Graphics RTOS</li>
</ul>
<h3><a class="anchor" id="autotoc_md82"></a>
Supported Hardware and Peripherals</h3>
<ul>
<li>External Controllers - SSD1963, SSD1306, ILI9488</li>
<li>Internal Controllers - LCDC (A592), GLCD (MZ DA), GPU (MZ DA, SAM 9x60)</li>
</ul>
<h3><a class="anchor" id="autotoc_md83"></a>
Overview</h3>
<p>Legato is responsible for presenting a visual means of interaction between a user and an application. The library provides the building blocks to construct a complex user interface and is responsible for managing the interface once created. It is also responsible for responding to external input from users other sources and reacting appropriately. The goals of this library are to be:</p>
<ul>
<li>a simple but powerful user tool</li>
<li>customizable to the needs of the application</li>
<li>light and flexible with regards to resource consumption</li>
<li>easily extensible to meet future design needs</li>
</ul>
<h4><a class="anchor" id="autotoc_md84"></a>
Definitions</h4>
<p>Alignment – Indicates the placement of objects within a given bounding area</p>
<p>Bounding Rectangle – The rectangle that an object occupies in a given space</p>
<p>Context – The global state of the library</p>
<p>Event – An indication of some kind of occurrence that may require attention</p>
<p>Layer – Directly related to the layers offered by hardware. Legato layers also function as direct children to a parent root. Widgets are added to root and become part of the overall widget tree context.</p>
<p>Margin – A buffer area at the edge of a bounding rectangle</p>
<p>Rasterize – The process of translating a user interface model from a logical mathematical representation into a visual image.</p>
<p>Scheme – A list of colors that can be referenced for drawing purposes</p>
<p>Screen – The root node of a widget tree. Represents a discrete configuration of layers and widgets. Can have a unique life cycle for custom memory management.</p>
<p>String – A logical array of linguistic characters</p>
<p>Widget – An abstract object that is part of a user interface</p>
<p>Widget Tree – A tree data structure of widgets that, when rendered, generates a user interface image.</p>
<p>Overview</p>
<p>The legato graphics library is responsible for: </p><pre class="fragment">Widget Tree Management
Event Management
Input Handling
Scene Rendering
</pre><p>Widget Tree Management</p>
<p>The widget tree is a tree data structure comprised primarily of widgets. At its root is a screen object. Each of the screen object’s direct children is a layer object. Any descendants of a layer are widgets.</p>
<p>Heterogeneous Space</p>
<p>When dealing with objects in a tree it is helpful to understand objects do not live in the same coordinate space as their ancestors or descendants. Each level of the tree represents a unique area of spatial coordinates with the root coordinate space, or the screen space, being the physical space of the display device. Each space is a two dimensional Cartesian coordinate system in both the positive and negative directions.</p>
<p>For example, assume a widget is a child of a root which is a child of a screen. The screen position is (0,0) in physical space. The root position is (20,20). Widget 1 is at (20,20) and widget 2 is at (20,20). All of these coordinates aside from the screen are relative. Each widget is (20,20) offset from its parent. However, Widget 2 is not at (20,20) in physical space, it’s actually (60,60). In global space each space builds on its parent, but it’s entirely relative.</p>
<p>Using a tree to manage the logical state of a user interface provides numerous benefits. </p><pre class="fragment">Position Inheritance – Child coordinate systems logically inherit from their parents but are not directly affected by them. Thus, if some ancestor changes position in its space, children likewise change overall position but their positions in their relative space do not change. This allows for easy manipulation of large portions of the user interface through very small changes.
Intelligent Rendering – The tree structure allows for fast analysis of widget states when determining how and when to render the overall scene. Nodes in the tree track changes in the states of widgets and their descendants. This allows the library to use intelligent methods to cull portions of the user interface to avoid the processing overhead of redrawing widgets that have not changed.
Effect Propagation – As with coordinate propagation, effects can also be inherited along tree branches. For instance, if some node in the tree is made invisible, all descendants are also made invisible. If a node is made partially transparent, then that transparency is propagated to all descendant nodes.
</pre><p>Screens</p>
<p>A screen is defined as the logical root of the user interface scene. Its direct descendants are always one or more layers, as seen in the above diagram. Its size always matches the physical dimensions of the display device used.</p>
<p>Life Cycle</p>
<p>The life cycle of a screen can be configured to better manage run-time memory usage. The relevant options are:</p>
<p>Persistent – By default screens will create their widget tree when shown and will free the memory consumed by their widget tree when they are hidden. A screen that is marked as persistent will not free their widget tree when hidden. This allows widgets in a screen to maintain their state when the screen is no longer visible. The downside is that more heap memory is consumed.</p>
<p>Create At Startup – By default screens are only created when they are shown thus keeping run-time memory usage to a minimum. However, the application may want to access widgets in a screen before it is shown for the first time. This option will cause the screen to allocate all of its memory when the screen is first added to the user interface library context.</p>
<p>Orientation</p>
<p>Because the hardware and its drivers support dynamic orthogonal orientation, screens can take advantage of this feature. Thus, screens have the option to set a magnitude of rotation to some factor of 90 degrees.</p>
<p>Layers</p>
<p>User interface layers serve several functions. They function as the root parent for widgets, they directly correspond to hardware layers in the graphics driver. Layer management is handled by display drivers and not by Legato.</p>
<p>In the simplest case the hardware supports a single layer that is the same dimension as the physical display. More advanced cases may have several layers.</p>
<p>Schemes</p>
<p>Schemes in Legato are simply collections of colors with given names. If a scheme is assigned to a widget then that scheme will be referenced by that widget during rendering. Legato has an internal scheme that all widgets use by default in the event that a scheme is not assigned.</p>
<p>Below is a list of scheme colors and a description of how it is often used. There is no restriction on how a widget references a scheme. The color names are merely a recommendation.</p>
<p>Scheme Colors </p><pre class="fragment">Base – Default area fill
Highlight – Light embossing
Highlight Light – Very light embossing
Shadow – Dark embossing
Shadow Dark – Very dark embossing
Foreground – A foreground color
Foreground Inactive – Foreground color when inactive
Foreground Disabled – Foreground color when disabled
Background – A background color, usually to differentiate from Base
Background Inactive – Background when inactive
Background Disabled – Background when disabled
Text – Text color
Text Highlight – Text color background when highlighted
Text Highlight Text – Text color when highlighted
Text Inactive – Text color when inactive
Text Disabled – Text color when disabled
</pre><p>Widgets</p>
<p>A widget is an abstract representation of an object in the user interface. In its most basic form it is a rectangle that is capable of drawing a border, a background color, and containing child widgets. More specific implementations extend the basic widget implementation to provide advanced functionality.</p>
<p>The Legato library relies on function pointers to take advantage of some object oriented programming concepts like inheritance and polymorphism.</p>
<p>Widgets are typically created by calling their specific “new” function. For instance: “leWidget_New()” will allocate a new basic widget and return a pointer to it (similar to calling new in C++). Calling this function will automatically initialize the widget by calling the constructor for that widget. Deleting widgets is done through the use of the function “leWidget_Delete()”.</p>
<p>Widgets can then be added to layers or other widgets as desired.</p>
<p>Edit Widgets</p>
<p>Edit widgets are a special class of widget that inherits from the EditWidget base implementation instead of Widget. These widgets are capable of becoming the active “edit” widget which means that they will receive any edit events raised by a widget capable of issuing edit events, such as a key pad.</p>
<p>Widget Implementations</p>
<p>The following are descriptions of the widgets offered by Legato: </p><pre class="fragment">Button
    Standard button type widget.
    Can have text and image icon.
    Has a toggle mode.
Check Box
    Standard check box widget.
    Has built in image for checked and unchecked state.
    Can use custom image for checked and unchecked state.
Circle
    Widget that draws a circle
Draw Surface
    Widget that has a callback during its paint loop
    Allows application to make raw draw calls during Legato's paint loop
Gradient
    Widget that draws linearly interpolated gradient for its background
    Can use as a parent for other widgets to achieve custom backgrounds
Group Box
    Widget that functions as a decorated container
    Offers a line border and a horizontally aligned title
Image
    Widget that draws an image
    Image is clipped to the bounds of the widget.
    Image can be vertically or horizontally aligned to the bounds of the widget
Image Sequence
    Widget that functions as an automatic image slideshow renderer
    Can add a sequence of widgets and a list of time delays
    Can automatically cycle through list of images without application input
Key Pad
    A grid of button widgets
    Buttons can be configured to send edit events to the library edit API
Label
    Widget that draws a string
    Can be aligned vertically and horizontally
Line
    Widget that draws a line between two specified coordinates
List
    A list box of strings
    Strings can have icons
    Can be configured to have single, sequential, or multi-selection state
List Wheel
    A rotating wheel of strings
    Cycles seamlessly through the list
    Responds to drag input
Panel Widget
    Panels are containers of other widgets, including daughter panels, in support of a parent-child tree of widgets, with the Panel widget as the parent
Progress Bar
    Widget that fills in a direction based on a given percentage
Radio Button
    A button that can belong to a group of radio buttons
    Only one button in group can be selected at any one time
Rectangle
    Widget that draws a rectangle
Scroll Bar
    A scroll bar that has a configurable scroll range.
    Normally embedded in other widgets like the list box
Slider
    A widget that slides between a min and max value
Text Field
    A field of text that can be modified by edit event inputs
Touch Text
    A widget that draws lines based on input events
    Helps to demonstrate input functionality
Window
    A container that can be decorated with a title bar
    Title bar can have title text and an icon
</pre><p>Event Management</p>
<p>The Legato state maintains an internal list of events that must get serviced frequently. This is done by called by "<a class="el" href="legato__state_8c.html#a11a4bdc4862590f21a99b906c43ec363">leUpdate()</a>”. This is known as the ‘update loop’.</p>
<p>Input Handling</p>
<p>The user interface library has no knowledge of existing hardware but it must provide the means for the user to interact with the scene. Legato thus provides several generic APIs to allow any source to inject input events into the system. These events are stored in the internal event list and are handled during the next update phase.</p>
<p>Scene Rendering</p>
<p>The widget tree is a logical representation of the state of the user interface. The library must be capable of transforming this information into a visual representation that can be sent to the graphics display. The individual widgets contain the algorithms necessary to render themselves but Legato is responsible for telling the widgets when to render themselves. This is known as the ‘paint loop’</p>
<p>The library is responsible for evaluating the widget tree to detect widgets that indicate invalid visual states and managing the redraw. It is essential that widgets only redraw when necessary to avoid needlessly consuming processing resources. It is also important that the library not attempt to draw too much at once as that may starve the rest of the application. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
